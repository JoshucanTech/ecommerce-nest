model Shipping {
  id               String           @id @default(uuid())
  name             String
  description      String?
  deliveryTime     String
  price            Float            @default(0)
  isActive         Boolean          @default(true)
  createdAt        DateTime         @default(now())
  updatedAt        DateTime         @updatedAt
  shippingPolicyId String?
  shippingType     ShippingType     @default(STANDARD)
  maxDays          Float            @default(0)
  minDays          Float            @default(0)
  CartItem         CartItem[]
  orderItems       OrderItem[]
  OrderShipping    OrderShipping[]
  shippingZones    ShippingZone[]
  ShippingPolicy   ShippingPolicy?  @relation(fields: [shippingPolicyId], references: [id])
  vendorShippings  VendorShipping[]
  Vendor           Vendor[]         @relation("ShippingToVendor")

  @@map("shippings")
}

model ShippingZone {
  id         String   @id @default(uuid())
  country    String
  region     String?
  postalCode String?
  shippingId String
  city       String?
  maxPrice   Float?
  maxWeight  Float?
  minPrice   Float?
  minWeight  Float?
  price      Float?
  shipping   Shipping @relation(fields: [shippingId], references: [id])

  @@map("shipping_zones")
}

model OrderShipping {
  id                String         @id @default(uuid())
  orderId           String
  shippingId        String
  trackingCode      String         @unique
  status            ShippingStatus @default(PROCESSING)
  estimatedDelivery DateTime?
  actualDelivery    DateTime?
  notes             String?
  vendorId          String
  order             Order          @relation(fields: [orderId], references: [id])
  shipping          Shipping       @relation(fields: [shippingId], references: [id])
  vendor            Vendor         @relation(fields: [vendorId], references: [id])

  @@map("order_shippings")
}

model VendorShipping {
  id              String          @id @default(uuid())
  vendorId        String
  shippingId      String
  priceOverride   Float?
  isActive        Boolean         @default(true)
  fulfillment     FulfillmentType @default(MERCHANT)
  maxDaysOverride Float?
  minDaysOverride Float?
  shipping        Shipping        @relation(fields: [shippingId], references: [id])
  vendor          Vendor          @relation(fields: [vendorId], references: [id])

  @@unique([vendorId, shippingId])
  @@map("vendor_shippings")
}

model ShippingPolicy {
  id              String     @id @default(uuid())
  name            String
  description     String
  processingTime  String
  vendorId        String
  products        Product[]
  vendor          Vendor     @relation(fields: [vendorId], references: [id])
  shippingMethods Shipping[]

  @@map("shipping_policies")
}

enum ShippingStatus {
  PROCESSING
  PACKED
  SHIPPED
  IN_TRANSIT
  OUT_FOR_DELIVERY
  DELIVERED
  FAILED
  RETURNED
}

enum ShippingType {
  STANDARD
  EXPEDITED
  TWO_DAY
  ONE_DAY
  SAME_DAY
  INTERNATIONAL
}

enum FulfillmentType {
  MERCHANT
  PLATFORM
  PRIME
}
